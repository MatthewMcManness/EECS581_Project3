# Prologue Comments:
# Code Artifact: Calendar, To-Do List, and Daily View UI Definition (Kivy Layout)
# Brief Description: This KV file defines the layout and structure of the app, including the Calendar, 
# To-Do List, and Daily View screens. It ensures visual consistency and functionality across the screens.
# Programmer: Matthew McManness (2210261), Magaly Camacho (3072618), Mariam Oraby (3127776)
# Dates Revised:
#   - October 26, 2024: Initial structure - [Matthew McManness]
#   - November 18, 2024: Added Daily View - [Mariam Oraby]
#   - December 6, 2024: Updated styles, colors, and spacing - [Matthew McManness]

ScreenManager:
    id: screen_manager
    CalendarView:
    ToDoListView:
    DailyView:

<CalendarView>:
    name: "calendar"
    FloatLayout:
        # Background color
        canvas.before:
            Color:
                rgba: app.Background_Color
            Rectangle:
                pos: self.pos
                size: self.size

        BoxLayout:
            orientation: 'vertical'
            size_hint: None, None
            size: dp(800), dp(600)
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            spacing: dp(10)

            # Header with title
            BoxLayout:
                size_hint_y: None
                height: dp(50)
                spacing: dp(10)
                Label:
                    text: "Calendar"
                    font_size: app.title_font_size
                    color: (0, 0, 0, 1)

            # Navigation buttons
            BoxLayout:
                size_hint_y: None
                height: dp(40)
                spacing: dp(10)
                UniformButton:
                    text: "Previous"
                    on_press: root.change_month(-1)
                Label:
                    text: root.month_year_text
                    font_size: app.button_font_size
                    color: (0, 0, 0, 1)
                UniformButton:
                    text: "Next"
                    on_press: root.change_month(1)

            # Days of the week header
            BoxLayout:
                size_hint_y: None
                height: dp(40)
                spacing: dp(2)
                canvas.before:
                    Color:
                        rgba: app.Day_Label_Color
                    Rectangle:
                        pos: self.pos
                        size: self.size
                Label:
                    text: "Sun"
                    halign: "center"
                    color: (1, 1, 1, 1)
                Label:
                    text: "Mon"
                    halign: "center"
                    color: (1, 1, 1, 1)
                Label:
                    text: "Tue"
                    halign: "center"
                    color: (1, 1, 1, 1)
                Label:
                    text: "Wed"
                    halign: "center"
                    color: (1, 1, 1, 1)
                Label:
                    text: "Thu"
                    halign: "center"
                    color: (1, 1, 1, 1)
                Label:
                    text: "Fri"
                    halign: "center"
                    color: (1, 1, 1, 1)
                Label:
                    text: "Sat"
                    halign: "center"
                    color: (1, 1, 1, 1)

            # Calendar grid
            ScrollView:
                do_scroll_x: False
                do_scroll_y: True
                GridLayout:
                    id: calendar_grid
                    cols: 7
                    spacing: dp(5)
                    row_default_height: dp(60)
                    row_force_default: True
                    adaptive_height: True

            # Footer with buttons
            BoxLayout:
                size_hint_y: None
                height: dp(80)  # Increased height for padding
                spacing: dp(10)
                padding: [0, dp(10), 0, dp(10)]  # Add vertical padding
                UniformButton:
                    text: "Add Event"
                    on_release: app.open_add_event_modal()
                UniformButton:
                    text: "To-Do List"
                    on_release: app.switch_to_screen("todo")

<ToDoListView>:
    name: "todo"
    FloatLayout:
        # Background color
        canvas.before:
            Color:
                rgba: app.Background_Color  
            Rectangle:
                pos: self.pos
                size: self.size

        BoxLayout:
            orientation: 'vertical'
            size_hint: None, None
            size: dp(800), dp(600)
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            spacing: dp(10)

            # Header with title
            BoxLayout:
                size_hint_y: None
                height: dp(50)
                spacing: dp(10)
                Label:
                    text: "To-Do List"
                    font_size: app.title_font_size
                    color: (0, 0, 0, 1)

            # Sort and filter options
            BoxLayout:
                size_hint_y: None
                height: dp(70)
                spacing: dp(10)
                UniformSpinner:
                    id: filter_spinner
                    text: "Filter by Priority"
                    values: ["All", "High", "Medium", "Low", "-"]
                    on_text: root.filter_tasks(self.text)
                UniformSpinner:
                    id: sort_spinner
                    text: "Sort by"
                    values: ["Priority", "Due Date", "Category"]
                    on_text: root.sort_tasks(self.text)

            # Task list
            ScrollView:
                GridLayout:
                    id: task_list
                    cols: 1
                    spacing: dp(5)
                    size_hint_y: None
                    height: self.minimum_height

            # Footer with buttons
            BoxLayout:
                size_hint_y: None
                height: dp(80)  # Increased height for padding
                spacing: dp(10)
                padding: [0, dp(10), 0, dp(10)]  # Add vertical padding
                UniformButton:
                    text: "Add Task"
                    on_release: app.open_add_task_modal()
                UniformButton:
                    text: "Calendar View"
                    on_release: app.switch_to_screen("calendar")

<DailyView>:
    name: "daily"
    FloatLayout:
        # Background color
        canvas.before:
            Color:
                rgba: app.Background_Color
            Rectangle:
                pos: self.pos
                size: self.size

        BoxLayout:
            orientation: 'vertical'
            size_hint: None, None
            size: dp(800), dp(600)
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            spacing: dp(10)

            # Header with title
            BoxLayout:
                size_hint_y: None
                height: dp(50)
                spacing: dp(10)
                Label:
                    text: "Daily View"
                    font_size: app.title_font_size
                    color: (0, 0, 0, 1)

            # Date navigation
            BoxLayout:
                size_hint_y: None
                height: dp(50)
                spacing: dp(10)
                UniformButton:
                    text: "Previous"
                    on_press: root.navigate_previous_day()
                Label:
                    id: date_label
                    text: "Date"
                    font_size: app.button_font_size
                    color: (0, 0, 0, 1)
                    size_hint_x: 1
                    halign: "center"
                    valign: "middle"
                    text_size: self.size
                UniformButton:
                    text: "Next"
                    on_press: root.navigate_next_day()

            # Event list
            ScrollView:
                GridLayout:
                    id: event_list
                    cols: 1
                    spacing: dp(10)
                    size_hint_y: None
                    height: self.minimum_height

            # Footer with buttons
            BoxLayout:
                size_hint_y: None
                height: dp(80)  # Increased height for padding
                spacing: dp(10)
                padding: [0, dp(10), 0, dp(10)]  # Add vertical padding
                UniformButton:
                    text: "Add Event"
                    on_release: app.open_add_event_modal()
                UniformButton:
                    text: "Calendar View"
                    on_release: app.switch_to_screen("calendar")

<UniformButton@Button>:
    background_normal: ""
    background_color: (0, 0, 0, 0)
    color: (1, 1, 1, 1)
    font_size: app.button_font_size
    padding: [dp(10), dp(10)]
    size_hint_y: None
    height: dp(50)
    canvas.before:
        Color:
            rgba: app.Button_Color
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [self.height / 2]

<UniformSpinner@Spinner>:
    background_normal: ""
    background_color: (0, 0, 0, 0)
    color: (1, 1, 1, 1)
    font_size: app.button_font_size
    size_hint_y: None
    height: app.button_size
    padding: [dp(10), dp(5)]
    canvas.before:
        Color:
            rgba: app.Button_Color
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [self.height / 2]
    # Dropdown customization
    dropdown_cls: '_UniformSpinnerDropdown'

<_UniformSpinnerDropdown@DropDown>:
    auto_dismiss: True
    canvas.before:
        Color:
            rgba: (0.2, 0.6, 0.8, 1)  # Match spinner background
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [dp(5)]  # Slightly rounded edges
    Label:
        color: (1, 1, 1, 1)  # White text for dropdown items
        font_size: app.button_font_size
        size_hint_y: None
        height: app.button_size
        padding: [dp(10), dp(5)]  # Padding for dropdown text
